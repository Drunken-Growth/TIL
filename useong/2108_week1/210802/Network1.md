## 네트워크 계층의 기능과 라우팅

### 네트워크 계층의 기능

**라우팅 정보의 처리**

- 소스 라우팅

1. 송신 호스트가 패킷의 전달 경로를 결정하는 방식
2. 전송 경로는 전송 패킷 내부에 기록됨

- 분산 라우팅

1. 라우팅 정보를 분산하여 관리하는 방식
2. 호스트의 개수가 많아질수록 효과적

- 중앙 라우팅

1. 특정 호스트(RCC, Routing Control Center)가 모든 라우팅 정보를 관리
2. 송신 호스트는 패킷 전송 전에 RCC에게 경로 정보를 얻어서 소스 라우팅으로 전송
3. 호스트의 개수가 많아질수록 비효율적

- 계층 라우팅

1. 분산 라우팅과 중앙 라우팅의 조합
2. 네트워크 규모가 커질수록 매우 효과적임

**혼잡 제어**

- 혼잡: 네트워크에 존재하는 패킷의 수가 급격히 증가하여 네트워크 성능이 악화되는 현상
- 혼잡 제어: 혼잡 문제를 해결하기 위한 방안

1. 혼잡 제어: 네트워크에서의 전송 능력 문제
2. 흐름 제어: 송수신 호스트 사이의 전송 속도 문제

- 혼잡의 원인

1. 타임 아웃 기능에 의한 패킷의 재전송으로 혼잡도 증가
2. 초기 혼잡 과정에서 타임 아웃 시간이 작으면 혼잡도가 급격히 증가
3. 패킷 도착 순서가 다른 상황에서 패킷을 분실 처리하면 타임아웃 증가
4. 의도적으로 피기배킹을 사용하면 응답 시간이 느려져 타임아웃 증가
5. 패킷 생존 시간을 작게 하면 패킷이 강제로 제거되어 타임아웃 증가

- 라우팅 알고리즘

1. 혼잡이 발생하지 않는 경로를 배정하도록 설계
2. 혼잡이 발생하는 경로를 선택하면 혼잡이 주변으로 확대됨

- 트래픽 성형

1. 혼잡의 발생은 트레픽이 특정 시간에 집중되는 버스트 현상이 원인
2. 패킷 발생 정도를 네트워크에서 예측 가능한 정도로 조절하는 기능이 필요
3. 리키 버킷(Leaky Bucket) 알고리즘

- 혼잡 제거

1. 특정 지역의 혼잡이 다른 지역으로 확대되지 않도록 하는 것이 중요
2. 자원 예약 방식: 호스트와 서브넷이 미리 네트워크 자원의 사용 정도를 협상
3. 초크 패킷

### 라우팅

**간단한 라우팅 프로토콜**

- 네트워크에서의 거리 기준: 중간에 위치하는 라우터의 수 (홉의 수)
- 최단 경로 라우팅

1. 패킷이 중개 과정에서 거치는 라우터의 수가 최소화되도록 라우팅한다.

- 플러딩(Flooding)

1. 출력 가능한 모든 경로로 중개
2. 패킷이 무한히 만들어질 수 있으므로 생존 시간으로 제한
3. 특별한 목적으로만 사용

- 거리 벡터 프로토콜

1. 누가: 이웃하게 직접 연결된 라우터간에 라우팅 정보를 교환
2. 무엇을: 각 라우터에서 개별 네트워크까지 패킷을 전송하는데 걸리는 거리 정보

- 필수 정보

1. 링크 벡터: 이웃하게 직접 연결된 네트워크에 대한 연결 정보
2. 거리 벡터: 전체 개별 네트워크에 대한 거리 정보
3. 다음 홉 벡터: 개별 네트워크로 가기 위한 다음 홉 정보

**거리 벡터 프로토콜**

- 링크 벡터

1. 링크 벡터 L(x) = [포트(1), 포트(2), ..., 포트(M)]
2. 포트(M): 라우터의 포트 번호
3. M: 라우터 주변의 이웃하는 네트워크의 수

- 거리 벡터

1. 거리벡터 D(x) = [거리(1), 거리(2), ..., 거리(N)]
2. 거리(N): 최소 전송 시간 혹은 홉의 수 등
3. N: 전체 개별 네트워크의 수

- 다음 홉 벡터

1. 다음 홉 벡터 H(x) = [홉(1), 홉(2), ..., 홉(N)]
2. 홉(N): 전송 경로에 있는 다음 홉 정보
3. N: 전체 개별 네트워크의 수

- RIP(Routing Information Protocol)

1. 거리 벡터 프로토콜을 사용하는 내부 라우팅 프로토콜
2. UDP 프로토콜을 사용
3. 라우팅 테이블 적용 원리

- 거리 벡터 정보가 새로운 네트워크 주소면 적용

- 목적지까지의 지역이 더 적으면 기존 경로를 대체

- 거리 벡터 정보가 입력되면 등록 정보를 수정
