## 도메인 서비스와 DNS 데이터 베이스

### 도메인 서비스

- 호스트 이름과 IP 주소 정보의 관리를 위한 분산 데이터베이스 시스템

**IP 주소**

- 32비트 크기
- 사용자 편의를 위해 8 비트 크기의 10진수 4개로 표현

  - www.xxx.yyy.zzz

  - 예: 211.223.201.30

- 주소 클래스

  - 클래스 A: 2^ 24개의 호스트 수용

  - 클래스 B: 2^ 16개의 호스트 수용

  - 클래스 C: 2^ 8개의 호스트 수용

  - 클래스 D: 멀티태스킹 지원

**DNS**

- 도메인 이름: 문자형으로 표기되는 호스트 이름 (일반 사용자가 선호)
- IP 주소: IP 프로토콜에서 호스트 구분을 위하여 반드시 필요
- DNS: 도메인 이름을 이용하여 IP 주소로 변환하는 서비스
- /etc/hosts 파일

  - 인터넷 초기에 수작업으로 관리

  - 파일의 내용은 (도메인 이름, IP 주소)의 쌍으로 구성

- 인터넷 보급이 확산되면서 DNS를 이용하여 자동으로 처리

**분산 데이터 베이스**

1. 해석기 (Resolver)

- IP 주소를 얻고자 하는 응용 프로그램이 호출
- 응용 프로그램은 해석기에게 도메인 이름을 매개변수로 제공
- 해석기는 UDP를 이용해 DNS 서버에 변환을 요청

1. nslookup 명령어

- DNS 서버: server.korea.co.kr

**DNS 구성 요소**

1. 도메인 네임 스페이스

- 트리 구조의 네임 스페이스를 비롯해 데이터에 대한 이름 관련 규칙을 정의
- 트리에 연결된 호스트는 자원 레코드로 표현

1. 네임 서버

- 도메인 트리 구조와 트리에 보관된 자원 레코드를 관리하는 프로그램
- 여러 네임 서버가 구역을 분할해 전체 도메인을 관리함

1. 해석기

- 클라이언트의 요청을 받아 네임 서버로부터 정보를 얻어냄
- 하나의 이상의 네임 서버와 접촉

### DNS 데이터 베이스

- DNS: 거대한 분산 데이터 베이스
- 도메인 네임 스페이스

1. DNS가 저장, 관리하는 계층적 데이터베이스
2. 최상위에 루트가 존재하고, 그 아래로 모든 호스트가 트리 구조로 이어짐
3. 레이블: 호스트의 이름
4. 도메인 이름: 점(.)으로 구분한 호스트 레이블의 연속

**도메인 네임 스페이스**

1. 도메인

- 도메인 이름

  - 최하위 레이블을 왼쪽에 위치하고 상위로 이동하면서 레이블을 표기

- TLD (최상위 도메인)

  - RFC 1591의 TLD

**자원 레코드**

1. 자원 레코드

- 이름과 주소 정보를 저장하기 위한 레코드
- 트리에 연결된 각 호스트의 정보는 자원 레코드와 관계됨
- DNS 네임 서버가 해석기에 반환하는 데이터가 자원 레코드 정보
- 질의 레코드(Query Record): DNS 클라이언트가 DNS 서버에 정보를 요청하는 용도

### 네임 서버

- 인터넷에서 여러 네임 서버가 유기적으로 동작하여 정보의 일관성 유지

**해석기**

- 도메인 이름과 호스트 주소 정보를 원하는 응용 프로그램은 해석기에게 요청
- 해석기는 DNS 서버와 접촉하는 DNS 클라이언트 역할을 수행

1. 인증 데이터

- 도메인 이름과 관련된 IP 주소를 얻는 과정

  - 해석기가 DNS 메시지 형식의 질의를 생성

  - 이 질의를 네임 서버에게 전달

  - 네임 서버는 회신용 DNS 메시지에 결과를 담아 해석기에 회신

- 네임 서버의 부담을 줄이기 위하여 캐시 정보를 활용

  - 인증 데이터: 해당 데이터를 직접 관리할 책임이 있는 네임 서버로부터 받은 정보

  - 캐시 데이터: 이전 요청에 의하여 호스트가 보관하던 정보

1. 존

- 존은 자원 레코드에 포함된 인증 데이터의 집합체로 정의됨
- 관리하는 정보

  - 존에 속하는 모든 호스트의 전체 자원 레코드 집합체

  - 존에 포함된 최상위 호스트

  - 위임 서브 존: 자신의 존에 속하지만 인증이 위임된 경우

  - 위임된 서버 존에 관한 글루(Glue) 데이터: 서브 존의 네임 서버에 접근할 수 있도록 해줌
