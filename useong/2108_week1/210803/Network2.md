## UDP, RTP, OSI TP의 서비스

### UDP

**UDP의 데이터 전송**

- 각 데이터그램이 독립적으로 전송됨
- UDP에서의 데이터그램 분실

1. 데이터 순서 번호 기능을 제공하지 않음
2. 데이터 분실 오류는 상위 계층에서 해결해야 함

### RTP(Real Time Protocol)

**실시간 서비스**

- 데이터 변형/분실 오류를 복구하는 기능이 상대적으로 덜 중요
- 도착 순서, 패킷의 지연 간격, 데이터 압축 등이 중요
- UDP: 기능이 단순하여 빠른 전송을 지원(순서 번호 보완 필요)

**실시간 요구 사항**

1. 일반 데이터 서비스 환경

- 파일 전송, 전자 메일 등
- 신뢰성이 중요
- 성능과 지연 문제는 덜 중요

1. 실시간 데이터 서비스 환경

- 정해진 시간 내에 도착하는지의 여부가 중요
- 신뢰성은 덜 중요

1. 버퍼의 역할

- 네트워크에서 데이터의 시간 간격이 불규칙적으로 변함
- 수신 프로세스의 버퍼를 이용하여 시간 간격이 일정하도록 보정

1. 지터

- 데이터그램의 도착 지연 시간의 분포(지연차)

**RTP의 데이터 전송 프로토콜**

1. 동작 원리

- UDP: 작고 빠른 전송 기능을 지원하는 UDP 프로토콜 위에서 구현
- RTP: 데이터그램 분실이나 도착 순서 변경 등의 오류는 RTP에서 해결
- 각각의 응용 환경에 따라 별도의 모듈을 작성하고, 필요 시 이를 첨삭하도록 설계

1. RTP 릴레이

- 데이터 전송 과정에서 데이터를 중개하는 기능을 제공
- 믹서와 트랜슬레이터로 구분

1. 믹서

- 여러 송신 프로세스의 데이터그램을 적절히 조합하여 새로운 데이터그램 생성
- 믹싱 과정에서 데이터그램 스트림에 대한 시간 정보 제공

1. 트랜슬레이터

- RTP 데이터그램을 하나 이상의 출력용 데이터그램으로 만들어 줌
- 예를 들어서 고해상도의 비디오 신호를 저해상도로 변환

**RTP 헤더**

1. 고정헤더

- 응용 환경에 따라 고정 헤더의 뒤에 가변 크기의 헤더가 추가됨
- CSRC 구분자 목록: 믹서에 의해 추가된 경우에 사용

1. Extension: 확장 헤더의 존재 유무
2. CSRC Count: CSRC 구분자의 개수
3. Payload Type
4. Sequence Number

- 분실, 순서 번호 변경 오류 검출

1. Timestamp

- 데이터그램의 생성 시기

**RTP 제어 프로토콜**

1. 주요 기능

- QoS와 혼잡 제어: 데이터 분배 과정에서 발생하는 서비스 품질에 관한 피드백 기능을 지원
- Identification: RTCP 패킷에는 RTCP 송신 프로세스에 관한 정보가 포함됨
- 세션 크기: RTCP 데이터그램의 최대 전송률은 5초당 1데이터그램
- 세션 제어: 최소한의 세션 제어 정보를 옵션으로 제공

### OSI TP(Transport Protocol)

**TP가 지원하는 서비스 클래스 (중요)**

- 클래스 0: 기본 기능
- 클래스 1: 기본 오류 복구 기능
- 클래스 2: 멀티플렉싱
- 클래스 3: 오류 복구, 멀티플렉싱
- 클래스 4: 오류 검출, 멀티플렉싱

### 상위 계층 (세션, 표현, 응용)

**세션 계층의 기능**

1. 세션 관리 기능

- 세션 연결의 설정과 해제
- 세션 메시지의 전송

1. 동기 기능

- 통신 양단끼리 서로 동의하는 논리적인 공통 시점
- 오류 복구를 위하여 필수적으로 요구됨
- 동기점 설정 이전까지는 서로 처리가 완료되었음을 합의했다는 의미

1. 대화

- 상위 개념의 연결을 의미

**토큰**

1. 토큰의 필요성

- 통신 양단의 대화를 관리하기 위함
- 토큰의 보유는 해당 토큰에 부여된 특정 권리를 배타적으로 소유한다는 의미

1. 토큰 종류

- 데이터 토큰: 데이터를 전송할 수 있는 권한
- 해제 토큰: 통신 양단 사이의 연결 해제를 제어하는 목적으로 사용
- 동기 토큰: 동기 처리가 필요한 시점에 사용

1. 동기점

- 동기점의 부여: 큰 파일을 작은 파일로 구분하는 과정

  - 큰 파일을 전송하는 과정의 중간 중간에 동기점을 부여

  - 동기점이 부여되었다는 의미는 해당 내용까지는 전송이 완료되었다는 의미

  - 따라서 전송 과정에 오류가 발생해도 동기점 이후의 과정만 복구하면 됨

- 주동기 토큰: 특정 대화 단위를 구분
- 부동기 토큰: 대화 단위를 세분화시켜서 구분

**동기**

1. 액티비티

- 독립적인 여러 파일을 구분하는 목적으로 사용
- 액티비티의 설정은 주동기점의 설정과 동일한 효과

1. 재동기

- 전송 오류가 발생했을 때 동기점을 이용한 일련의 복구 과정
- 주동기점

  - 주동기점이 설정된 곳은 완벽히 처리되었다는 의미

  - 따라서 주동기점 이전의 복구 과정은 필요하지 않음

- 부동기점

  - 복구에 필요한 백업 정보가 상대적으로 적음

  - 오류 복구가 완벽히 이루어지지 않을 수 있음

  - 이전 부동기점에서 복구가 불가능하면 직전 부동기점으로 이동하는 과정을 반복
