### 슬라이딩 윈도우 프로토콜

- 양방향 통신을 지원
- 오류 제어와 흐름 제어 기능을 모두 지원

**기본 절차**

- 송신 호스트는 정보 프레임(전송 데이터 + 순서 번호 + 오류 검출 코드)을 순서 번호에 따라 순차적으로 전송함
- 정보 프레임을 수신한 수신 호스트가 응답하는 순서 번호는 정상적으로 수신한 번호가 아닌 다음에 수신하기를 기대하는 번호를 회신하는 것이 일반적임
- 송신 호스트가 관리하는 송신 윈도우는 전송은 되었지만 긍정 응답이 회신되지 않은 프레임을 보관함
- 수신 호스트가 관리하는 수신 윈도우는 프로토콜의 동작 방식에 따라 크기가 다름

1. 선택적 재전송 방식에서는 송신 윈도우 크기와 같음
2. GoBack N 방식에서는 크기가 1임

**흐름 제어**

- 순서 번호(Sequence Number)

1. 프레임 별로 부여되는 일련 번호
2. 0부터 임의의 최대값까지 순환 방식으로 사용
3. 일반적으로 순서 번호의 최댓값이 송신 윈도우 크기보다 커야 함
4. 프레임에서 순서 번호의 공간 크기 = n 비트: 순서 번호의 범위는 0 ~ 2^n - 1

- 윈도우 크기(Window size)

1. 긍정 응답 프레임을 받지 않고 연속으로 전송할 수 있는 프레임의 최대 개수

**연속형 전송**

- 정지-대기 프로토콜은 송신 윈도우 크기가 1인 경우
- 연속형 정지: ACK 프레임을 받지 않고 여러 프레임을 연속으로 전송
- 장점: 오류 가능성이 적은 환경에서 효율적
- 오류 해결 방법

1. 선택적 재전송: 오류가 발생한 프레임만 재전송
2. GoBack N: 오류가 발생한 프레임 이후의 모든 프레임을 재전송

**피기배킹(Piggy backing)**

- 정보 프레임이 응답 프레임의 기능까지 수행

1. 정보 프레임 = 정보 프레임 + 응답 프레임
2. 2개의 순서 번호: 전송 데이터용 순서 번호, 응답용 순서 번호

- 장점: 응답 프레임의 전송 회수가 줄어 전송 효율이 좋아짐
- 표기 방법: I(m, n)

1. m: 정보 프레임에서 사용하는 전송 데이터의 순서 번호
2. n: 응답 프레임에서 사용하는 응답 순서 번호

### HDLC(High Level Data Link Control) 프로토콜

- 일대일, 일대다 연결 환경을 지원

**호스트의 종류**

- 주국: 명령을 전송하는 호스트
- 종국: 명령에 대한 응답을 회신하는 호스트
- 혼합국: 주국과 종국 기능을 모두 지닌 호스트

**기본 동작 원리**

- 주국이 종국에게 명령을 전송한다.
- 종국은 주국에게 응답을 회신한다.

**프레임 구조**

- 비트 프레임: 프레임의 시작과 끝에 플래그(011111110) 사용
- Address: 일대다 환경을 지원
- Control: 프레임 종류를 구분 (정보 프레임, 감독 프레임, 비번호 프레임)
- Checksum: CRC-CCITT 생성 다항식 사용

**프레임 종류**

- 정보 프레임

1. 3비트 크기의 순서 번호: 0 ~ 7
2. Seq: 정보 프레임의 순서 번호
3. Next: 피기배킹 목적의 응답용 순서 번호

<br />
<br />

### HDLC(High Level Data Link Control) 프로토콜

**프레임 종류**

- 감독 프레임

1. Type 0: 긍정 응답 프레임 (00: RR(Receive Ready))
2. Type 1: 부정 응답 프레임 (01: REJ(Reject))
3. Type 2: 흐름 제어용 프레임 (10: RNR(Receive Not Ready))
4. Type 3: 선택적 재전송 방식에서 사용하는 부정 응답 프레임 (11: SREJ(Selective Reject))

- 비번호 프레임

1. 순서 번호가 없는 프레임을 의미
2. 프레임 종류

- SABM(Set ABM): 비동기 균형 모드의 연결 설정을 요구

- SNRM(Set NRM): 정규 응답 모드의 연결 설정을 요구

- SARM(Set ARM): 비동기 응답 모드의 연결 설정을 요구

- DISC: 연결 해제를 요구

- RSET: 리셋 기능을 수행

- FRMR: 프레임 수신을 거부

- UA: 비번호 프레임에 대한 응답 기능을 수행

1. 연걸 설정 모드의 종류: NRM, ABM, ARM
2. 정규 응답(NRM)

   - 불균형 모드를 의미하므로, 호스트 하나는 주국이고 다른 하나는 종국

   - 종국에서 데이터를 전송하려면 주국의 허락이 필요

3. 비동기 균형(ABM)

   - 두 호스트 모두 혼합국으로 동작

   - 양쪽에서 명령과 응답을 전송할 수 있음

4. 비동기 응답(ARM)

   - 불균형 모드

   - 주국의 허락 없이 종국에서 데이터를 전송할 수 있음

- LAP(Link Access Protocol)

1. 비동기 응답 모드인 ARM으로 동작
2. 주국에서 SARM 명령을 전송하여 연결을 설정하는 경우
3. 종국에서 SARM 응답을 전송하여 SARM 명령을 받고 연결을 설정하는 경우

- LAPB(Link Access Protocol Balanced)

1. 양쪽 호스트가 혼합국으로 동작

### IP 프로토콜의 이해

**네트워크 계층의 기능**

- 기본 기능: 송수신 호스트 사이의 패킷 전달 경로를 선택
- 네트워크 계층의 주요 기능: 라우팅, 혼잡 제어, 패킷의 분할과 병합
- 라우팅

  - 라우팅 테이블: 네트워크 구성 형태에 관한 정보를 관리

  - 라우팅: 송수신 호스트 사이의 패킷 전달 경로를 선택하는 과정

- 혼잡 제어

  - 혼잡: 네트워크에 패킷 수가 과도하게 증가되는 현상

  - 혼잡 제어: 혼잡의 발생을 예방하거나 제거하는 기능

- 패킷의 분할과 병합

  - 상위 계층에서 내려온 데이터는 하위 계층인 MAC 계층의 프레임 구조에 정의된 형식으로 캡슐화 되어야 함

  - 송신 호스트에서는 전송 전에 적절한 크기로 데이터를 분할하고

  - 수신 호스트는 분할되어 수신한 데이터를 다시 병합함

**서비스의 종류**

- 연결형, 비연결형 서비스

1. 연결형: 데이터 전송 전에 데이터의 전송 경로를 미리 결정
2. 비연결형: 데이터의 전송 경로를 사전에 결정하지 않고 패킷 단위로 결정

- 비연결형 서비스

1. 패킷의 전달 순서

- 패킷이 서로 다른 경로로 전송되므로 도착 순서가 일정하지 않음

- 상위 계층에서 순서를 재조정해야 함

1. 패킷 분실 가능성

- 패킷의 100% 도착을 보장하지 않음

- 상위 계층에서 패킷 분실 오류를 복구해야 함

1. 인터넷 환경의 예

- IP: 네트워크 계층의 기능을 지원하는 비연결형 프로토콜

- UDP: 전송 계층의 기능을 지원하는 비연결형 프로토콜

- 연결형 서비스

1. 상대적으로 신뢰성이 높음
2. TCP: 전송 계층의 기능을 지원하는 연결형 프로토콜

**라우팅**

- 패킷의 전송 경로를 지정
- 전송 경로를 결정시 고려 사항

  - 공평 원칙: 다른 패킷의 우선 처리를 위해 다른 패킷이 손해를 보면 안됨

  - 효율 원칙: 전체 네트워크의 효율성에 대해 고려해야 함

- 정적/동적 라우팅

1. 정적 라우팅

- 패킷 전송이 이루어지기 전에 경로 정보를 라우터가 미리 저장하여 중개

- 단점: 경로 정보의 갱신이 어려우므로, 네트워크 변화/네트워크 혼잡도 대처 부족

1. 동적 라우팅

- 라우터의 경로 정보가 네트워크 상황에 따라 적절히 조절됨

- 단점: 경로 정보의 수집과 관리로 인한 성능 저하

- 라우팅 테이블

1. 라우터가 패킷의 적절한 경로를 찾기 위한 가장 기본적인 도구
2. 필수 정보: 목적지 호스트, 다음 홉

- 목적지 호스트: 패킷의 최종 목적지가 되는 호스트 주소

- 다음 홉: 목적지 호스트까지 패킷을 전달하기 위한 인접 경로

**HELLO/ECHO 패킷**

- HELLO: 주변 라우터에 HELLO 패킷을 보내어 주변 경로 정보를 파악하는 용도
- ECHO: 라우터 사이의 전송 지연 시간을 측정하는 용도
